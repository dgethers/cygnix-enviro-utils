#!source

source_pragma_once ~/.sleeprc ##enable the builtin version of sleep

function addhost(){
    for x in "$@" ; do
      echo adding $x
      sed "s/%HOST%/$x/" ~/.ssh/config_template >>~/.ssh/config
    done
}

function cdsrc() {
  envi="$1" ; shift
  c "$SRC/${envi}/projects" "$@"
  return $?
}


function c(){
  DIR="$1"
  shift
  if [[ ! -d "$DIR" ]] ; then
    mkdir -pv "$DIR" >&2
    RESULT=$?
    [[ $RESULT == 0 ]] || return $RESULT
  fi
  echo "$DIR" >&2
  if [[ -z "$*" ]] ; then
    cd "$DIR"
  else
    ( cd "$DIR" && "$@" )
  fi
}

function ppid() {
  local PID=$$ ; ps -p $(cat /proc/$PID/ppid)
}
