
function _can_add() {
  [[ -n "$1" && "$#" == 1 ]] && [[  "$PATH" == *?:"$1":?* || "$PATH" == "$1":?*
                                    || "$PATH" == *?:"$1" || ! -d "$1" ]]
}

function prepend-path() {
  for x ; do _can_add "$x" || export PATH="$x":"$PATH" ; done
}

function append-path() {
  for x ; do _can_add "$x" || export PATH="$PATH":"$x" ; done
}

prepend-path ~/bin
source_pragma_once $HOME/bashrc.d/*-path

